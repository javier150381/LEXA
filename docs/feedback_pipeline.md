# Feedback Pipeline

This document describes the feedback collection and processing flow used to improve the system.

## Saving User Corrections

When a user exports the final version of a document, the application compares the text originally generated by the AI with the text after the user's edits. The differences, along with both versions, are stored in `data/feedback/feedback_YYYYMMDDHHMMSS.json`.

## Processing Feedback

Run the following command periodically to aggregate the stored feedback and prepare data for template adjustments or model retraining:

```
python -c "from lib.feedback import process_feedback; process_feedback()"
```

This command reads all feedback JSON files and writes a `processed_feedback.jsonl` file containing pairs of generated and corrected texts.

## Folder Structure

```
data/feedback/
    feedback_YYYYMMDDHHMMSS.json
    processed_feedback.jsonl
```

The JSONL file can be used to update document templates or as a dataset for retraining the local model.
